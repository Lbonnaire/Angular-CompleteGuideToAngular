import{a as D}from"./chunk-2U7C6UGE.js";import{a as T,c as j,d as q,f as P,h as Q,i as k,o as H,p as O,q as G,t as U}from"./chunk-N5PPFZF3.js";import{B as M,E as l,F as d,K as u,M as S,N as a,O as s,P as f,Q as E,S as y,T as h,V as _,W as c,Y as w,ba as V,ca as F,da as I,ha as A,p as C,qa as R,s as x,t as L,ua as N,w as v,wa as z,x as b,xa as B,ya as g,za as J}from"./chunk-PY2CLCYS.js";function X(n,t){}function Y(n,t){n&1&&(a(0,"div",5),f(1,"app-loading-spinner"),s())}function Z(n,t){if(n&1){let p=E();a(0,"form",6,7),y("ngSubmit",function(){v(p);let e=_(1),o=h();return b(o.onSubmit(e))}),a(2,"div",8)(3,"label",9),c(4,"Email"),s(),f(5,"input",10),s(),a(6,"div",8)(7,"label",11),c(8,"Password"),s(),f(9,"input",12),s(),a(10,"div")(11,"button",13),c(12),s(),a(13,"button",14),y("click",function(){v(p);let e=h();return b(e.onSwitchMode())}),c(14),s()()()}if(n&2){let p=_(1),i=h();l(11),u("disabled",!p.valid),l(1),w(" ",i.isLoginMode?"Login":"Sign up"," "),l(2),w(" Switch to ",i.isLoginMode?"Sign up":"Login"," ")}}var K=(()=>{let t=class t{constructor(i,e,o){this.authService=i,this.router=e,this.componentFactoryResolver=o,this.isLoginMode=!0,this.isLoading=!1,this.error=null}onSwitchMode(){this.isLoginMode=!this.isLoginMode}onSubmit(i){if(!i.valid)return;let e=i.value.email,o=i.value.password,r;this.isLoading=!0,console.log(this.isLoginMode),this.isLoginMode?r=this.authService.login(e,o):r=this.authService.signUp(e,o),r.subscribe(m=>{console.log(m),this.isLoading=!1,this.router.navigate(["./recipes"])},m=>{console.log(m),this.error=m,this.showErrorAlert(m),this.isLoading=!1}),i.reset()}onHandleError(){this.error=null}showErrorAlert(i){let e=this.componentFactoryResolver.resolveComponentFactory(z),o=this.alertHost.viewContainerRef;o.clear();let r=o.createComponent(e);r.instance.message=i,this.componentSub=r.instance.close.subscribe(()=>{this.componentSub.unsubscribe(),o.clear()})}ngOnDestroy(){this.componentSub&&this.componentSub.unsubscribe()}};t.\u0275fac=function(e){return new(e||t)(d(D),d(R),d(M))},t.\u0275cmp=x({type:t,selectors:[["app-auth"]],viewQuery:function(e,o){if(e&1&&F(g,5),e&2){let r;V(r=I())&&(o.alertHost=r.first)}},decls:5,vars:2,consts:[["appPlaceholder",""],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],["style","text-align:center;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"text-align","center"],[3,"ngSubmit"],["authForm","ngForm"],[1,"form-group"],["for","email"],["type","email","id","email","ngModel","","required","","email","","name","email",1,"form-control"],["for","password"],["type","password","id","password","ngModel","","name","password","required","","minlength","6",1,"form-control"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(e,o){e&1&&(S(0,X,0,0,"ng-template",0),a(1,"div",1)(2,"div",2),S(3,Y,2,0,"div",3)(4,Z,15,3,"form",4),s()()),e&2&&(l(3),u("ngIf",o.isLoading),l(1),u("ngIf",!o.isLoading))},dependencies:[B,g,A,k,T,j,q,H,G,O,Q,P],encapsulation:2});let n=t;return n})();var de=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=L({type:t}),t.\u0275inj=C({imports:[N.forChild([{path:"",component:K}]),J,U]});let n=t;return n})();export{de as AuthModule};
